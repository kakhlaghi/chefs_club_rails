<% if @dish.errors.any? %>
<% @dish.errors.full_messages.each do |msg| %>
  <li><%= msg %></li>
<%end%>
<%end%>

<%= form_for @dish do |f| %>
  Name:<%= f.text_field :name %>
  Cook Time:<%= f.number_field :cook_time %> minutes
  <br>
  <!--<%= f.collection_select :ingredient_ids, Ingredient.all, :name, :name %>
  <% if Ingredient.all != [] %>
  <br>
  <%= f.collection_select :ingredient_ids, Ingredient.all, :id, :name %>
  <%end%>
  <br>
  <%= f.label "Quantity" %>
  <%= f.fields_for :dish_ingredients, DishIngredient.new do |quant| %>
    <%= quant.number_field :quantity %>
    <%end%>
  <br>-->
  <!-- something is wrong here... creates two ingredients instead of 1. come back to this -->
  <fieldset>
  <h3>Add new ingredients</h3><br>
  
  <%= f.fields_for :dish_ingredients do |dif| %>
    <%= dif.label "Quantity" %>
    <%= dif.number_field :quantity %>
    <%= dif.fields_for :ingredients do |ingr| %> <!-- can do collection select with ingr id OR have a field for a name with another nested field-->
      <%= ingr.label "Ingredient" %>
      <%= ingr.text_field :name %>
      <%end%>
  <%end%>
<br>
</fieldset>

   <%= submit_tag 'Submit Dish' %>

<%end%>
